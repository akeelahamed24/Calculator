<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>R22 Calculator - Internals</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="manifest" href="manifest.json">
</head>
<body>
    <header>
        <h1>R22 Calculator</h1>
        <nav class="standard-nav">
            <ul class="nav-menu">
              <li><a href="index.html">Internals</a></li>
              <li><a href="external.html">Externals</a></li>
              <li><a href="overall.html">Internal+External</a></li>
            </ul>
          </nav>
      
          <!-- Hamburger for smaller screens -->
          <div class="hamburger" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
          </div>
          <nav>
            <ul class="nav-menu hidden">
              <li><a href="index.html">Internals</a></li>
              <li><a href="external.html">Externals</a></li>
              <li><a href="overall.html">Internal+External</a></li>
            </ul>
          </nav>

          <!-- Install Button for PWA -->
          <button id="installBtn" style="display: none;">Install App</button>
        </header>
      
  <main>
    <div class="calculator">
      <h2>Internals Calculator</h2>
      <form id="internalForm">
        <label>FAT1 Written Test (50):</label>
        <input type="number" id="fat1_written" max="50" min="0" required>
        <label>FAT1 Assignment (50):</label>
        <input type="number" id="fat1_assignment" max="50" min="0" required>
        <label>FAT2 Written Test (50):</label>
        <input type="number" id="fat2_written" max="50" min="0" required>
        <label>FAT2 Assignment (50):</label>
        <input type="number" id="fat2_assignment" max="50" min="0" required>
        <label>FAT3 Written Test (50):</label>
        <input type="number" id="fat3_written" max="50" min="0" required>
        <label>FAT3 Assignment (50):</label>
        <input type="number" id="fat3_assignment" max="50" min="0" required>
        <button type="button" onclick="calculateInternalMarks()">Calculate Internals</button>
      </form>
      <div class="result">
        <h3>Internal Marks: <span id="internalResult">0</span> / 40</h3>
      </div>
    </div>
  </main>
  <footer>
    <p>Developed by Akeel Ahamed R S</p>
    <p>BE. Computer Science Engineering student at SVCE</p>
    <p>
      LinkedIn: <a href="https://www.linkedin.com/in/akeelahamed242k5/" target="_blank">Profile</a> |
      GitHub: <a href="https://github.com/akeelahamed24" target="_blank">Profile</a>
    </p>
    <p>Copyright Â© 2024 R22 Calculator. All rights reserved.</p>
  </footer>
  <script src="app.js"></script>
  <script>
    // Install PWA button functionality
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      // Prevent the default prompt
      e.preventDefault();
      // Store the event for later
      deferredPrompt = e;
      // Show the install button
      const installBtn = document.getElementById('installBtn');
      installBtn.style.display = 'block';

      installBtn.addEventListener('click', () => {
        // Show the install prompt
        deferredPrompt.prompt();
        // Wait for user response
        deferredPrompt.userChoice.then((choiceResult) => {
          if (choiceResult.outcome === 'accepted') {
            console.log('User accepted the install prompt');
          } else {
            console.log('User dismissed the install prompt');
          }
          // Reset the prompt
          deferredPrompt = null;
        });
      });
    });

    function calculateInternalMarks() {
      const fat1_written = parseFloat(document.getElementById('fat1_written').value) || 0;
      const fat1_assignment = parseFloat(document.getElementById('fat1_assignment').value) || 0;
      const fat2_written = parseFloat(document.getElementById('fat2_written').value) || 0;
      const fat2_assignment = parseFloat(document.getElementById('fat2_assignment').value) || 0;
      const fat3_written = parseFloat(document.getElementById('fat3_written').value) || 0;
      const fat3_assignment = parseFloat(document.getElementById('fat3_assignment').value) || 0;

      const fat1 = (fat1_written * 0.7) + (fat1_assignment * 0.3);
      const fat2 = (fat2_written * 0.7) + (fat2_assignment * 0.3);
      const fat3 = (fat3_written * 0.7) + (fat3_assignment * 0.3);

      const internalMarks = ((fat1 + fat2 + fat3) / 3) * 0.8;
      const cappedInternalMarks = Math.min(internalMarks, 40);

      document.getElementById('internalResult').textContent = cappedInternalMarks.toFixed(2);
    }

    function toggleMenu() {
      const navMenu = document.querySelector('.nav-menu');
      navMenu.classList.toggle('show');
    }
  </script>
</body>
</html>
